import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class PantallaPrincipal extends JPanel implements ActionListener {

    private JFrame ventana;
    private Image fondo;

    private JLayeredPane capas;

    private JLabel maniqui;
    private JLabel ropaSuperior;
    private JLabel ropaInferior;
    private JLabel zapatos;

    private JButton btnSuperior1;
    private JButton btnInferior1;
    private JButton btnZapatos1;
    private JButton btnMenu;

    public PantallaPrincipal(JFrame ventana) {
        this.ventana = ventana;

        setLayout(null);
        cargarImagenFondo("assets/fondo_closet.png");

        capas = new JLayeredPane();
        capas.setBounds(0, 0, 900, 600);
        add(capas);

        inicializarManiqui();
        inicializarCapasRopa();
        inicializarMenuLateral();
        inicializarBotonMenu();
    }

    private void cargarImagenFondo(String ruta) {
        fondo = new ImageIcon(ruta).getImage();
    }

    private void inicializarManiqui() {
        maniqui = new JLabel(new ImageIcon("assets/maniqui.png"));
        maniqui.setBounds(300, 80, 300, 500);
        capas.add(maniqui, JLayeredPane.DEFAULT_LAYER);
    }

    private void inicializarCapasRopa() {

        ropaInferior = new JLabel();
        ropaInferior.setBounds(390, 110, 300, 500);
        capas.add(ropaInferior, JLayeredPane.PALETTE_LAYER);

        ropaSuperior = new JLabel();
        ropaSuperior.setBounds(390, 35, 300, 500);
        capas.add(ropaSuperior, JLayeredPane.MODAL_LAYER);

        zapatos = new JLabel();
        zapatos.setBounds(388, 260, 300, 500);
        capas.add(zapatos, JLayeredPane.DRAG_LAYER);
    }

    private void inicializarMenuLateral() {

        btnSuperior1 = new JButton(new ImageIcon("assets/superior1.png"));
        btnSuperior1.setBounds(30, 80, 120, 120);
        btnSuperior1.setContentAreaFilled(false);
        btnSuperior1.setBorderPainted(false);
        btnSuperior1.addActionListener(this);
        capas.add(btnSuperior1, JLayeredPane.POPUP_LAYER);

        btnInferior1 = new JButton(new ImageIcon("assets/inferior1.png"));
        btnInferior1.setBounds(30, 230, 120, 120);
        btnInferior1.setContentAreaFilled(false);
        btnInferior1.setBorderPainted(false);
        btnInferior1.addActionListener(this);
        capas.add(btnInferior1, JLayeredPane.POPUP_LAYER);

        btnZapatos1 = new JButton(new ImageIcon("assets/zapatos1.png"));
        btnZapatos1.setBounds(30, 360, 120, 120);
        btnZapatos1.setContentAreaFilled(false);
        btnZapatos1.setBorderPainted(false);
        btnZapatos1.addActionListener(this);
        capas.add(btnZapatos1, JLayeredPane.POPUP_LAYER);
    }

    private void inicializarBotonMenu() {
        btnMenu = new JButton(new ImageIcon("assets/boton_menu.png"));
        btnMenu.setBounds(700, 20, 80, 40);
        btnMenu.setContentAreaFilled(false);
        btnMenu.setBorderPainted(false);
        btnMenu.addActionListener(this);
        capas.add(btnMenu, JLayeredPane.POPUP_LAYER);
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(fondo, 0, 0, getWidth(), getHeight(), this);
    }

    public void actionPerformed(ActionEvent e) {

        if (e.getSource() == btnSuperior1) {
            ropaSuperior.setIcon(new ImageIcon("assets/superior1.png"));
        }

        if (e.getSource() == btnInferior1) {
            ropaInferior.setIcon(new ImageIcon("assets/inferior1.png"));
        }

        if (e.getSource() == btnZapatos1) {
            zapatos.setIcon(new ImageIcon("assets/zapatos1.png"));
        }

        if (e.getSource() == btnMenu) {
            mostrarMenuJuego();
        }
    }

    private void mostrarMenuJuego() {
        int opcion = JOptionPane.showOptionDialog(
                this,
                "¿Qué deseas hacer?",
                "Menú del Juego",
                JOptionPane.YES_NO_CANCEL_OPTION,
                JOptionPane.PLAIN_MESSAGE,
                null,
                new Object[]{"Guardar", "Salir al Inicio", "Cancelar"},
                "Cancelar"
        );

        if (opcion == 0) {
            JOptionPane.showMessageDialog(this, "Guardando partida...");
        }

        if (opcion == 1) {
            ventana.setContentPane(new PantallaInicio(ventana));
            ventana.revalidate();
        }
    }
}
